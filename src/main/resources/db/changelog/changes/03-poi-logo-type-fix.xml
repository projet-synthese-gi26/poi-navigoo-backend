<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <changeSet id="03-alter-poi-logo-type" author="yowpoint">
        <addColumn tableName="point_of_interest">
            <column name="poi_logo_new" type="TEXT"/>
        </addColumn>
        <sql>
            UPDATE point_of_interest SET poi_logo_new = encode(poi_logo, 'escape');
        </sql>
        <dropColumn tableName="point_of_interest" columnName="poi_logo"/>
        <renameColumn tableName="point_of_interest" oldColumnName="poi_logo_new" newColumnName="poi_logo" columnDataType="TEXT"/>
    </changeSet>

</databaseChangeLog>
